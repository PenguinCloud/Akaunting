---
- name: Create empty repo for akaunting
  file:
    path: /opt/akaunting
    state: directory

- name: Download zip file
  ansible.builtin.get_url:
    url: "{{ app.link}}"
    dest: /opt/akaunting

- name: Install Akaunting
  unarchive:
    src: "/opt/akaunting/{{ app.version }}"
    dest: /opt/akauntin
    remote_src: yes
    owner: "{{ run.user }}"
    group: "{{ run.user }}"
    mode: '775'

- name: Delete the zip file
  file:
    path: "/opt/akaunting/{{ app.version }}"
    state: absent

- name: Recursively change ownership of a directory
  ansible.builtin.file:
    path: /etc/foo
    state: directory
    recurse: yes
    owner: foo
    group: foo